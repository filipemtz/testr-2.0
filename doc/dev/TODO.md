
# TODO

- [ ] Check [django deployment instructions](https://docs.djangoproject.com/en/5.0/howto/deployment/checklist/)
- [ ] Add the installation with apache in the readme.

# Requirements

- [ ] Se o judge tiver rodado e o professor mudar casos de teste (remover ou adicionar, por exemplo), a interface do aluno não deve quebrar.
- [ ] Professores devem ser capazes de executar o sistema localmente para não inviabilizar atividades se internet não estiver disponível (e.g., prova no labgrad).
- [ ] O sistema deve ser resistente a alunos :) Por exemplo, se o aluno se desmatricular de uma disciplina no meio do semestre (é raro, mas acontece bastante), as submissões não devem ser perdidas.
- [ ] Personalizar script de correção.
  - [ ] Laiola corrige exercícios de bancos de dados.
  - [ ] Thiago executa compilação cruzada de arquivos e "força" o conteúdo de alguns arquivos.
  - [ ] Patrícia usa muitos arquivos, potencialmente grandes, e indica qual deve ser usado via linha de comando.
  - [ ] Filipe e Vinicius desejam executar valgrind e moss automaticamente.
- [ ] Correções devem ser feitas em paralelo.
- [ ] Novas linguagens e métodos de correção devem ser facilmente adicionáveis.
- [ ] Segurança e confiabilidade.
- [ ] Deve ser possível baixar questões como pacotes independentes de forma que professores possam exportá-las e, por exemplo, subir no AVA. Os pacotes devem incluir casos de teste e script de correção.
- [ ] Deve existir uma base de questões passível de busca. Professores devem poder buscar questões na base e adicioná-las em turmas e atividades.

# Backlog

- [ ] What should happen to the courses if all teachers delete their accounts? We remove the course? What about the questions? We don't want to lose the questions.
- [ ] as teacher, remove all tests when they were auto-generated with problems.
- [ ] non-functional: safety.
- [ ] as teacher, see a log of logins and IPs so that I can check if students cheated by logging in the same account in multiple computers or copied the answers from someone sit by his/her side.
- [ ] as teacher, define start and end dates for submissions so that we can do tests with limited time.
- [ ] allow removing files from questions
- [ ] show progress in relation to others as a gamification strategy
- [ ] allow easily running the services locally
- [ ] export and import questions, classes, users, etc.
- [ ] make questions independent self-contained packages so that they are not dependent of the system. Users should be able of downloading questions, uploading in other virtual learning envs and, running autojudge independently in the context of the question. Why: if the system is discontinued, users should not lose the questions because preparing them is highly time-consuming.
- [ ] non-binary grades based on the number of tests passed. Allow setting weights to the tests.
- [ ] grades based on code quality or implementation of requirements (classes, functions, structs, etc.)
- [ ] model *types of problems* so that we can provide a system for users easily creating questions of these types.
- [ ] apply strip on all lines used as input in tests.
- [ ] run evaluation of submissions in parallel
- [ ] In autojudge, add CLI commands to allow re-evaluating a single question, course, student, and submission.
- [ ] In autojudge, re-evaluate only the most recent submission of each student
- [ ] As a student, view or download the submitted file.
- [ ] Delete submissions?
- [ ] write a script to setup the test environment with some default users and questions
- [ ] Use a better logging system to avoid the need of manually controlling verbosity.
- [ ] Add types of errors when printing the result of tests in autojudge script.
- [ ] teachers should be able of adding tests in questions to check if
        files were submitted or generated by the program and if their content  is correct.
- [ ] teachers should be able of easily writting custom evaluation scripts.
- [ ] teachers should be able of seeing students performance
- [ ] in the teacher and admin interface, present system health information (docker is running, etc.)
- [ ] Use question's creation flow in the other models.
- [ ] Drag and drop questions between sections.
- [ ] Attach files to the question description.
- [ ] Drag and drop sections to change order.
- [ ] limit memory and CPU using python subprocess when not using docker (see https://docs.python.org/3/library/resource.html))
- [ ] Import and export questions from/to BOCA.
- [ ] refactor the directory checks and processings in autojudge due to the use of docker
- [ ] Import users from file (similar to BOCA).
- [ ] Add checks for login, permissions, and groups in all views
- [ ] refactor autojudge
- [ ] Use JS in the question editor to prevent annoying page jumps.
- [ ] When user is not allowed to perform an action, it is currently redirected to the main page (courses). Redirect to the error page instead.
- [ ] Better e-mail check.
- [ ] Teachers - edit or submit new docker images to run programs.
- [ ] Process input and output tests when submitted and not when running tests.
- [ ] Write unit tests
- [ ] As student, receive support from an AI agent so that I can advance my studies by myself.

# Known Bugs

- [ ] Tags adicionadas na descrição da questão afetam o restante da página. Por exemplo, se o professor adicionar um "<b>" e não fechar na descrição, a página inteira da questão, inclusive testes, etc. ficará em negrito.

- [ ] Melhorar o README.md para que as instalações do Postgres só precisem ser feitas se a pessoa for usar este BD. Requer atualizar o requirements.txt para remover o psycopg2.

- [ ] When the user running the autojudge does not have permission to interact with docker, the autojudge sets the questions as incorrect as a result of the failure in running docker. Check if docker can be used before grading questions.

- [ ] Autofocus on file submission in question-detail

- [ ] In most forms, when the user (1) click in delete, (2) cancel the delete, and (3)
click the "back" hyperlink in the form page, it returns to the delete page. This is
a bit challenging to make right because the user can arrive in the form page from
different pages.



