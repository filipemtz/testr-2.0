<h2>Gerenciar arquivos</h2>

<div class="d-flex flex-wrap mb-3">
  <input
    type="file"
    class="form-control me-2 my-1"
    style="max-width: 700px"
    multiple
    (change)="selectFiles($event)"
  />
  <button
    class="btn btn-success my-1"
    [disabled]="!selectedFiles"
    (click)="uploadFiles()"
  >
    Upload
  </button>
</div>

<div *ngFor="let progressInfo of progressInfos" class="mb-2">
  <span>{{ progressInfo.fileName }}</span>
  <div class="progress">
    <div
      class="progress-bar progress-bar-info"
      role="progressbar"
      [attr.aria-valuenow]="progressInfo.value"
      aria-valuemin="0"
      aria-valuemax="100"
      [ngStyle]="{ width: progressInfo.value + '%' }"
    >
      {{ progressInfo.value }}%
    </div>
  </div>
</div>

<h3>Lista de arquivos</h3>
<div *ngIf="fileInfos; else noFilesTemplate">
  <ul class="list-group list-group-flush">
    <li
    *ngFor="let file of fileInfos | async"
      class="list-group-item d-flex justify-content-start align-items-center"
    >
      <i class="fa-regular fa-folder me-2"></i>
      <div class="fw-bold">{{ file.file_name }}</div>
      <button
        type="button"
        class="btn btn-sm fa-solid fa-trash text-danger ms-2"
        (click)="deleteFile(file.id)"
      ></button>
    </li>
  </ul>
</div>
<ng-template #noFilesTemplate>
  <p>NÃ£o existem arquivos para serem exibidos.</p>
</ng-template>


<div *ngIf="message.length" class="alert alert-secondary my-3" role="alert">
  <ul *ngFor="let msg of message; let i = index">
    <li>{{ msg }}</li>
  </ul>
</div>
